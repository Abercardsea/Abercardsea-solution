from bidder.src.wind import get_wind_prediction
import pandas as pd

import numpy as np


def test_get_wind_prediction(timeseries):

    expected =  np.array([365.82013931, 363.040077,   358.39322183, 353.09698852, 347.8007552,
 342.42005834,323.31990235, 312.8416776,299.66898449, 282.82869203,
 264.59076173, 238.96275122, 213.48943521, 213.48943521, 213.48943521,
 213.48943521, 213.48943521, 213.48943521, 213.48943521, 213.48943521,
 213.48943521, 213.48943521, 213.48943521, 213.48943521, 213.48943521,
 252.15022894, 282.82869203, 307.33555702, 323.31990235, 336.58647304,
 347.17154781, 336.58647304, 323.31990235, 307.33555702, 282.82869203,
 252.15022894, 358.39322183, 356.62781073, 354.86239962, 353.09698852,
 351.33157741, 349.56616631, 347.8007552,  349.56616631, 351.33157741,
 353.09698852, 354.86239962, 356.62781073
    ])

    series = pd.read_csv('bidder/test/samples/met_office.csv')

    result = get_wind_prediction(series)
    print(result)
    assert all(np.isclose(result.WindPower, expected))
